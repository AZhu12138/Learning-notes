<img src="https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200531134158.png" style="zoom:10%;" />

 

<img src="https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200531134235.png" style="zoom: 50%;" />

 

**课** **程** **设** **计**

 

 

 

**课程名称**   **计算机系统高级课程**      

**题目名称**   **5 条指令 8位 CISC CPU设计**   

**学生学院**   **计算机学院**          

**专业班级**   **计算机科学与技术2018级1班** 

**学  号**        **3118005393**          

**学生姓名**   **朱亮**             

**指导教师**   **胡志斌**            

 

 

 

 

 

 

2020 年 6 月 15 日


 

**设计内容与设计要求**

**1** **设计目标**

本次课程设计的主要内容是利用设计工具，设计一个模型计算机。

CPU 的主要功能是执行指令，控制完成计算机的各项操作，包括运算操作、传送操作、输入/输出操作等。作为模型计算机设计，将重点放在寄存器级，采取较简单的组成模式，以尽量简洁的设计帮助学生掌握CPU 的基本原理。 此次设计CPU就是为了了解CPU运行的原理，从而完成从指令系统到CPU的设计，并且通过仿真对CPU设计进行正确性评定。

（1）融会贯通本课程各章节的内容，通过知识的综合运用，加深对计算机系统各功能部件的工作原理及相互联系的认识，加深计算机工作中“时间-空间”概念的理解，从而清晰地建立计算机的整机概念；

（2）学习设计和调试计算机的基本步骤和方法，提高使用Quartus等软件仿真工具和集成电路的基本技能；

（3）培养科学研究的独立工作能力，取得工程设计与组装调试的实践和经验。

**2** **设计内容**

设计一台多种指令的模型计算机，用VHDL 语言完成设计并调试成功。

**3** **设计要求**

（1）根据给定的数据格式和指令系统，设计一台微程序控制的模型计算机。

（2）根据设计图，在QUARTUS环境下仿真调试成功。

**4** **报告内容**

（1）总框图（数据通路图）；

（2）微程序控制器逻辑图；

（3）微程序流程图；

（4）微程序代码表；

（5）设计说明书；电路原理图、仿真波形图。

**4** **成绩评定**

程序设计方案是否合理；程序设计是否正确；调试结果；设计说明书的质量；答辩时回答问题情况；课程设计表现情况。

已启用抄袭检查系统，不得雷同，不得抄袭，一旦发现成绩为零。


 

 

 

目  录

[一 数据格式与指令系统... 1](#_Toc531769035)

[二 设计原理与电路图... 1](#_Toc531769036)

[三 微程序流程图、代码表... 1](#_Toc531769037)

[四 系统调试情况... 1](#_Toc531769038)

[五 参考资料... 2](#_Toc531769039)

[附录 VHDL程序... 3](#_Toc531769040)

 

 


 

# 一、 数据格式与指令系统

（1）指令基本格式

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619213140.png)

其中，OP-CODE 为操作码，rs 为源寄存器，rd 为目的寄存器，并规定：

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619213348.png)

（2）指令编码格式

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619213435.png)

其中 IN 为单字长（8位二进制），其余为双字长指令，XX H 为 addr 对应的十六进制地址码。

（3）微代码的定义

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619212046.png)

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619212150.png)

**注：24 位微代码中各信号的功能**

(1) uA5—uA0：微程序控制器的微地址输出信号，是下一条要执行的微指令的微地址。

(2) S3、S2、Sl、S0：由微程序控制器输出的ALU操作选择信号，以控制执行16种算术操作或16种逻辑操作中的某一种操作。

(3) M：微程序控制输出的ALU操作方式选择信号端。M＝0执行算术操作；M＝l执行逻辑操作。

(4) Cn：微程序控制器输出的进位标志信号，Cn＝0表示ALU运算时最低位有进位，Cn＝1则表示无进位。  

(5) WE：微程序控制器输出的RAM控制信号。当/CE＝0时，如WE＝0为存储器读；如WE＝1为存储器写。

(6) A9、A8——译码后产生CS0、CS1、CS2信号，分别作为SW_B、RAM、LED的选通控制信号。 

(7) A字段（15、14、13）——译码后产生与总线相连接的各单元的输入选通信号。

(8) B字段（12、11、10）——译码后产生与总线相连接的各单元的输出选通信号。

(9) C字段（9、8、7）  ——译码后产生分支判断测试信号P(1)~P(4)和LDPC信号。

# 二 、设计原理与电路图

（1）CPU 结构图

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619203047.png)

（2）数据通路图

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619215238.png)

（3）RTL 图

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619203317.png)

（4）CPU 顶层设计图

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619203609.png)

# 三 、微程序流程图、代码表

（1）  微程序流程图

 ![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200617145749.png)

（2）微代码表

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619214705.png)

# 四 、系统调试情况

（1） 测试结果（部分 波形图）

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619231443.png)

（2） 测试结果（完整 波形图）

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619231642.png)

# 五 、参考资料

[1] 潘松,潘明. 现代计算机组成原理[M]. 北京：科学出版社,2007.

[2] 陈华光. 计算机组成原理[M].北京：机械工业出版社，2004：5-10.

[3] 侯伯亨等. VHDL硬件描述语言与数字逻辑电路设计（修订版）[M]，西安：西安电子科技大学出版社，1999：75-78.

[4] 杨东旭等.计算机组成原理实用教程[M]. 北京：清华大学出版社, 2001：120-122.



# 附录 VHDL程序

（1）  寄存器

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619234353.png)

（2）  算术运算器 ALU

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619234325.png)

（3）  控制器

![](https://azhu12138.oss-cn-shenzhen.aliyuncs.com/img/20200619235350.png)

